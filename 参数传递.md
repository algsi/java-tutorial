# 参数传递

在了解 Java 中的参数传递之前，我们先了解一下两种参数传递方式。

#### 值传递

值传递是指在调用函数时将实际参数复制一份传递到函数中，这样在函数中如果对参数进行修改，将不会影响到实际参数。

着重注意 ** 复制 ** 两字。

#### 引用传递

函数参数的传递方式有引用传递。所谓引用传递是指在调用函数时将实际参数的地址传递到函数中，那么在函数中对参数所进行的修改，将影响到实际参数。

#### 区分

关于值传递比较好理解，而对于引用传递，这里面其实有很细节的东西。我们暂且通过一个 Java 示例程序来理解一下什么是引用传递。

```java
Employee a=new Employee("tom", 7000);
Employee b=new Employee("jerry", 4000);

public static void swap(Employee x, Employee y){
	//交换两个员工的姓名
    Employee temp = x;
    x = y;
    y = temp;
}

swap(a, b);

```

在 Java 中，上面的程序能达到预期的目的吗？很显然，并不能够。我们知道，a，b是两个同一种引用类型的变量，它们各自指向一个对象实例，即各自指向了它们自己对应的内存地址，而调用 swap 方法发生了什么呢？实际上，调用 swap 方法时，会把 a 变量的引用地址复制给 x，b 变量的引用地址复制给 y（看起来像不像值传递！），这个时候 a 和 x 指向同一个内存地址（对象实例），b 和 y 指向同一个内存地址（内存实例），所以，在函数中，只是互换了一下 x 和 y 的指向，并没有改变 a 和 b 的指向。

那么，真正的引用传递是什么呢？在引用传递中有一个关键描述掉：** 在函数中对参数所进行的修改，将影响到实际参数 **。实际上，在这一点上就有一点模糊不清，我们可以有两种情况：

- 第一种：我们在函数中修改形参（引用类型变量）的指向将会改变实参指向的内存地址。

- 第二种：我们在函数中修改形参的内部属性将会改变实参的内部属性。

一般来说，如果第一种情况可以做到，那么第二种情况也能够做到。而引用传递的纠结之处就在于只能够满足第二种情况能不能算引用传递。可能不同人有不同看法，但是，** 在这里，我们要清楚，做到第一条和第二条是引用传递，只做到第二条并不能算引用传递 **。

很明显，C++ 能够满足第一种和第二种情况，所以它是支持引用传递的。而 Java 只支持第二种情况，并且，传参时实际上是复制了一份引用地址给形参，实参和形参都指向同一个对象地址，所以，** Java中只有值传递。 **

根据Horstmann的《java核心技术》（中文第8版P115-P117）的描述，java中是没有引用传递的，原文摘录如下：

> java程序设计语言总是采用值调用。也就是说，方法得到的是所有参数值的一个拷贝，特别是，方法不能修改传递给它的任何参数变量的内容。

> 有些程序员（甚至是本书的作者），认为java程序设计语言对对象采用的是引用调用，实际上这种理解是不对的。

首先再次明确一下值传递和引用传递的概念：

- 值传递：表示方法接收的是调用者提供的值，即复制了一份给形参。

- 引用传递：表示方法接收的是调用者提供的变量地址。也就是说，实参和形参都是同一个引用，并不是两个不同引用指向同一个地址。

## 总结

Java 中对于基本数据类型的传参采用的是值传递，对于引用数据类型的传递采用的也还是值传递。