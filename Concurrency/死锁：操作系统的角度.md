# 死锁：操作系统的角度

死锁的定义：在一个进程集合中每一个进程都在等待只能由该集合中其他的进程才能引发的事件，而无限陷入僵持的局面。

一种情形，此时执行程序中两个或多个线程发生永久堵塞（等待），每个线程都在等待被其他线程占用并堵塞了的资源。例如，如果线程A锁住了记录1并等待记录2，而线程B锁住了记录2并等待记录1，这样两个线程就发生了死锁现象。

## 死锁产生的必要条件

**注意，是必要条件**

1. 互斥条件：进程互斥使用资源，一旦某个资源被占用，则要使用该资源的进程必须等待。

2. 占有和等待条件：进程申请新资源得不到满足而等待时，不释放已占有的资源。

3. 不剥夺条件：一个进程不能抢夺其他进程占有的资源。

4. 循环等待条件（环路添加）：存在一组进程循环等待资源的现象。

前三个条件是死锁产生的必要条件，不是充分添加（也就是说，如果产生了死锁，则必有前三个条件出现）。第四个条件是前三个条件同时存在时产生的结果，只要破坏这四个条件之一，死锁即可防止。

